<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>Contact - CarGent Mobile</title>

  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Raleway:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">
  <link href="assets/vendor/animate.css/animate.min.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
  <link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
  <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">
  <link href="assets/css/style.css" rel="stylesheet">
  
  <style>
    /* --- HEADER & MOBILE NAV REPAIR --- */
    #header {
      height: 70px !important;
      background: #000 !important;
      z-index: 9997 !important;
      display: flex !important;
      align-items: center !important;
      border-bottom: 1px solid #d4af37 !important;
      position: fixed;
      top: 0;
      width: 100%;
    }

    #header .logo img {
      max-height: 40px !important;
    }

    /* Push content below header */
    main { padding-top: 70px !important; }

    /* --- Form Styling --- */
    .form-wrapper {
      background: #ffffff;
      border-radius: 15px;
      box-shadow: 0 15px 35px rgba(0,0,0,0.1);
      border: 1px solid #eee;
    }
    .form-step { display: none; }
    .form-step.active { display: block; animation: fadeIn 0.4s ease-in-out; }
    .progress-bar { background: linear-gradient(45deg, #D4AF37, #f2d06b) !important; }
    .step-title { color: #000; font-weight: 800; margin-bottom: 25px; }
    
    .next-btn, .fleet-btn, button[type="submit"] {
      background: linear-gradient(to bottom, #f2d06b 0%, #D4AF37 100%) !important;
      color: #000 !important;
      font-weight: 700 !important;
      padding: 15px 30px !important;
      border: 1px solid #B8860B !important;
      border-radius: 8px !important;
      transition: 0.3s;
    }

    .btn-type-select {
        border: 2px solid #D4AF37;
        color: #D4AF37;
        background: transparent;
        padding: 20px;
        border-radius: 15px;
        transition: 0.3s;
        height: 100%;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
    }

    .btn-type-select:hover {
        background: rgba(212, 175, 55, 0.1);
        color: #D4AF37;
    }

    .btn-type-select i { font-size: 2.5rem; margin-bottom: 10px; }

    /* --- ADD-ONS STYLING --- */
    .addons-container {
      background: #0a0a0a;
      border: 2px solid #D4AF37;
      border-radius: 12px;
      padding: 20px;
      margin-top: 20px;
      box-shadow: 0 5px 15px rgba(212, 175, 55, 0.1);
    }
    
    .addon-checkbox-group {
      display: flex;
      align-items: center;
      gap: 15px;
      padding: 12px;
      border-bottom: 1px solid #333;
      cursor: pointer;
      transition: 0.3s;
    }
    
    .addon-checkbox-group:last-child { border-bottom: none; }
    
    .addon-checkbox-group:hover {
      background: rgba(212, 175, 55, 0.05);
    }
    
    .addon-checkbox-group input[type="checkbox"] { 
      width: 22px; 
      height: 22px; 
      accent-color: #D4AF37;
      cursor: pointer;
    }
    
    .addon-info { text-align: left; }
    
    .addon-info label { 
      font-weight: 700; 
      color: #D4AF37;
      margin: 0; 
      cursor: pointer;
      display: block;
      font-size: 1.05rem;
    }
    
    .addon-info small { 
      color: #cccccc; 
      font-size: 0.85rem; 
      display: block;
    }

    .info-item {
      transition: 0.3s;
      border-radius: 10px;
    }
    .info-link:hover .info-item {
      background: rgba(212, 175, 55, 0.05);
      transform: translateY(-5px);
    }

    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
  </style>
</head>

<body style="background-color: #f8f9fa;">

  <header id="header" class="fixed-top d-flex align-items-center">
    <div class="container d-flex align-items-center justify-content-between">
      <a href="index.html" class="logo">
        <img src="assets/img/Cargent Banner.png" alt="Logo" class="img-fluid">
      </a>
      <nav id="navbar" class="navbar">
        <ul>
          <li><a class="nav-link" href="index.html">Home</a></li>
          <li><a class="nav-link" href="about.html">About</a></li>
          <li><a class="nav-link" href="services.html">Services</a></li>
          <li><a class="nav-link" href="fleet.html">Fleet & Commercial</a></li>
          <li><a class="nav-link" href="contact.html">Contact</a></li>
        </ul>
      </nav>
      <i class="bi bi-list mobile-nav-toggle"></i>
    </div>
  </header>

  <main id="main">
    <section class="breadcrumbs" style="background: #000; color: #fff; padding: 20px 0;">
      <div class="container">
        <div class="d-flex justify-content-between align-items-center">
          <h2 style="color: #d4af37;">Book Your Service</h2>
          <ol class="breadcrumb mb-0">
            <li class="breadcrumb-item"><a href="index.html" style="color: #d4af37;">Home</a></li>
            <li class="breadcrumb-item active" style="color: #fff;">Contact</li>
          </ol>
        </div>
      </div>
    </section>

    <section id="contact" class="contact py-5">
      <div class="container">
        <div class="row justify-content-center">
          <div class="col-lg-8">
            <div class="form-wrapper p-4 p-md-5">

              <div id="type-selection" class="text-center animate__animated animate__fadeIn">
                  <h3 class="step-title">How can we help you today?</h3>
                  <div class="row g-3">
                      <div class="col-md-6">
                          <button class="btn btn-type-select w-100" onclick="startForm('individual')">
                              <i class="bi bi-person-badge"></i>
                              <strong>Individual Vehicle</strong>
                              <small>Mobile Maintenance & Swaps</small>
                          </button>
                      </div>
                      <div class="col-md-6">
                          <button class="btn btn-type-select w-100" onclick="startForm('fleet')">
                              <i class="bi bi-truck"></i>
                              <strong>Fleet & Commercial</strong>
                              <small>Multi-vehicle Service Solutions</small>
                          </button>
                      </div>
                  </div>
              </div>

              <form action="forms/contact.php" method="post" id="stepped-form" style="display: none;" novalidate>
                <input type="hidden" name="booking_type" value="Individual">
                <div class="progress mb-4" style="height: 10px;">
                  <div id="progress-bar" class="progress-bar" role="progressbar" style="width: 25%;"></div>
                </div>

                <div class="form-step active text-center">
                  <h4 class="step-title">1. Select Your Service</h4>
                  <select name="service" id="service" class="form-control form-control-lg mb-3" required>
                    <option value="">-- Choose a Service --</option>
                    <option value="Oil Change">Mobile Oil Change</option>
                    <option value="Tire Swap">Tire Swap & Rotation</option>
                    <option value="Battery">Battery Boost/Replacement</option>
                    <option value="Inspection">Brake Services</option>
                  </select>

                  <div class="addons-container mb-4">
                    <p class="text-start mb-2 fw-bold text-uppercase" style="color: #D4AF37; font-size: 0.75rem; letter-spacing: 2px;">Enhance Your Service</p>
                    <label class="addon-checkbox-group">
                      <input type="checkbox" name="addon_cabin_filter" value="Yes">
                      <div class="addon-info">
                        <label>Cabin Air Filter</label>
                        <small>Purifies cabin air from dust & allergens</small>
                      </div>
                    </label>
                    <label class="addon-checkbox-group">
                      <input type="checkbox" name="addon_engine_filter" value="Yes">
                      <div class="addon-info">
                        <label>Engine Air Filter</label>
                        <small>Boosts engine performance & fuel economy</small>
                      </div>
                    </label>
                    <label class="addon-checkbox-group">
                      <input type="checkbox" name="addon_wipers" value="Yes">
                      <div class="addon-info">
                        <label>Premium Wiper Blades</label>
                        <small>Crystal clear visibility in all conditions</small>
                      </div>
                    </label>
                  </div>
                  <button type="button" class="next-btn btn w-100">Next: Location</button>
                </div>

                <div class="form-step text-center">
                  <h4 class="step-title">2. Vehicle Location</h4>
                  <div class="text-start mb-3">
                    <label class="small fw-bold mb-1" style="color: #333;">Street Address</label>
                    <input type="text" name="location" class="form-control" placeholder="House #, Street name" required>
                  </div>
                  <div class="row text-start mb-4">
                    <div class="col-md-6 mb-3">
                      <label class="small fw-bold mb-1" style="color: #333;">City</label>
                      <select name="city" id="city-select" class="form-select" required>
                        <option value="" selected disabled>Select City</option>
                        <option value="GTA">GTA (Toronto/Peel/York/Durham)</option>
                        <option value="Niagara Falls">Niagara Falls</option>
                        <option value="Cambridge">Cambridge</option>
                        <option value="K-W Area">K-W Area (Kitchener/Waterloo)</option>
                        <option value="Hamilton">Hamilton</option>
                        <option value="London">London</option>
                        <option value="Brantford">Brantford</option>
                        <option value="Woodstock">Woodstock</option>
                      </select>
                    </div>
                    <div class="col-md-6 mb-3">
                      <label class="small fw-bold mb-1" style="color: #333;">Postal Code</label>
                      <input type="text" name="postal_code" id="postal-input" class="form-control" placeholder="A1B 2C3" required>
                    </div>
                  </div>
                  <div class="d-flex gap-2">
                    <button type="button" class="btn btn-secondary w-50 prev-btn">Back</button>
                    <button type="button" class="next-btn btn w-50">Next: Details</button>
                  </div>
                </div>

                <div class="form-step text-center">
                  <h4 class="step-title">3. Contact Details</h4>
                  <div class="row text-start mb-4">
                    <div class="col-md-6 mb-3">
                      <label class="small fw-bold mb-1" style="color: #333;">Full Name</label>
                      <input type="text" name="name" class="form-control" placeholder="Your Name" required>
                    </div>
                    <div class="col-md-6">
                      <label class="small fw-bold mb-1" style="color: #333;">Phone</label>
                      <input type="tel" name="phone" class="form-control" placeholder="Phone Number" required>
                    </div>
                  </div>
                  <div class="d-flex gap-2">
                    <button type="button" class="btn btn-secondary w-50 prev-btn">Back</button>
                    <button type="button" class="next-btn btn w-50">Next: Finalize</button>
                  </div>
                </div>

                <div class="form-step text-center">
                  <h4 class="step-title">4. Confirm & Send</h4>
                  <input type="email" name="email" class="form-control mb-3" placeholder="Email Address" required>
                  <textarea name="message" class="form-control mb-3" rows="4" placeholder="Special notes (Vehicle model, specific spot for tech, etc.)"></textarea>
                  <div class="d-flex gap-2">
                    <button type="button" class="btn btn-secondary w-50 prev-btn">Back</button>
                    <button type="submit" class="btn w-50" style="background:#D4AF37; color:#000;">Submit Request</button>
                  </div>
                </div>
              </form>

              <form action="forms/contact.php" method="post" id="fleet-form" style="display: none;" class="animate__animated animate__fadeIn">
                  <input type="hidden" name="booking_type" value="Fleet">
                  <h4 class="step-title text-center">Commercial Fleet Inquiry</h4>
                  <div class="row">
                      <div class="col-md-6 mb-3"><input type="text" name="company" class="form-control" placeholder="Company Name" required></div>
                      <div class="col-md-6 mb-3"><input type="text" name="name" class="form-control" placeholder="Contact Person" required></div>
                      <div class="col-md-6 mb-3"><input type="tel" name="phone" class="form-control" placeholder="Phone Number" required></div>
                      <div class="col-md-6 mb-3"><input type="email" name="email" class="form-control" placeholder="Business Email" required></div>
                      <div class="col-md-12 mb-3">
                          <select name="fleet_size" class="form-control">
                              <option value="">Estimated Fleet Size</option>
                              <option value="1-5">1-5 Vehicles</option>
                              <option value="6-20">6-20 Vehicles</option>
                              <option value="20+">20+ Vehicles</option>
                          </select>
                      </div>
                      <div class="col-md-12 mb-3">
                          <textarea name="message" class="form-control" rows="4" placeholder="Tell us about your fleet requirements..."></textarea>
                      </div>
                  </div>
                  <div class="d-flex gap-2">
                      <button type="button" class="btn btn-secondary w-25" onclick="location.reload()">Back</button>
                      <button type="submit" class="btn fleet-btn w-75">Submit Fleet Request</button>
                  </div>
              </form>

            </div>
          </div>
        </div>
      </div>

      <div class="row mt-5 text-center">
        <div class="col-md-4">
          <a href="https://www.google.com/maps/search/?api=1&query=1254+Plains+Rd+E+%2311+Burlington+ON+L7S+7W6" target="_blank" class="info-link" style="text-decoration: none; color: inherit;">
            <div class="info-item p-3">
              <i class="bi bi-geo-alt" style="font-size: 2rem; color: #D4AF37;"></i>
              <p>1254 Plains Rd E #11, Burlington, ON L7S 7W6</p>
            </div>
          </a>
        </div>
        <div class="col-md-4">
          <a href="tel:+14373359080" class="info-link" style="text-decoration: none; color: inherit;">
            <div class="info-item p-3">
              <i class="bi bi-phone" style="font-size: 2rem; color: #D4AF37;"></i>
              <p>+1 (437) 335-9080</p>
            </div>
          </a>
        </div>
        <div class="col-md-4">
          <a href="mailto:support@cargent.ca" class="info-link" style="text-decoration: none; color: inherit;">
            <div class="info-item p-3">
              <i class="bi bi-envelope" style="font-size: 2rem; color: #D4AF37;"></i>
              <p>support@cargent.ca</p>
            </div>
          </a>
        </div>
      </div>
    </section>
  </main>

  <footer id="footer">
    <div class="container py-4 text-center">
      <div class="copyright">
        Â© Copyright <strong><span>CarGent Mobile</span></strong>. All Rights Reserved
      </div>
    </div>
  </footer>

  <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="assets/js/main.js"></script>

  <script>
    const steps = document.querySelectorAll(".form-step");
    const nextBtns = document.querySelectorAll(".next-btn");
    const prevBtns = document.querySelectorAll(".prev-btn");
    const progressBar = document.getElementById("progress-bar");
    let currentStep = 0;

    const cityPostalMap = {
        "GTA": ["M", "L4", "L5", "L6"], 
        "Niagara Falls": ["L2"],
        "Cambridge": ["N1", "N3"],
        "K-W Area": ["N2"],
        "Hamilton": ["L8", "L9"],
        "London": ["N5", "N6"],
        "Brantford": ["N3"],
        "Woodstock": ["N4"]
    };

    window.addEventListener('load', () => {
      const typeSelection = document.getElementById('type-selection');
      if (sessionStorage.getItem('contactIntroPlayed')) {
        typeSelection.classList.remove('animate__animated', 'animate__fadeIn');
        typeSelection.style.opacity = "1";
      } else {
        sessionStorage.setItem('contactIntroPlayed', 'true');
      }
    });

    function startForm(type) {
        document.getElementById('type-selection').style.display = 'none';
        if(type === 'individual') {
            document.getElementById('stepped-form').style.display = 'block';
        } else {
            document.getElementById('fleet-form').style.display = 'block';
        }
    }

    function updateForm() {
      steps.forEach((step, index) => {
        step.classList.toggle("active", index === currentStep);
      });
      progressBar.style.width = ((currentStep + 1) / steps.length) * 100 + "%";
      window.scrollTo({ top: document.getElementById('contact').offsetTop - 100, behavior: 'smooth' });
    }

    nextBtns.forEach(btn => {
      btn.addEventListener("click", () => {
        const currentDiv = steps[currentStep];
        const inputs = currentDiv.querySelectorAll("input, select, textarea");
        let valid = true;
        
        inputs.forEach(input => input.setCustomValidity(""));

        inputs.forEach(input => { 
          if(!input.checkValidity()) { 
            input.reportValidity(); 
            valid = false; 
          } 
        });

        if (valid && currentStep === 1) {
          const citySelect = currentDiv.querySelector("#city-select");
          const postalInput = currentDiv.querySelector("#postal-input");
          
          if (citySelect && postalInput) {
            const selectedCity = citySelect.value;
            const postalVal = postalInput.value.toUpperCase().trim();
            const formatRegex = /^[A-Z]\d[A-Z] \d[A-Z]\d$/;
            
            if (!formatRegex.test(postalVal)) {
              postalInput.setCustomValidity("Format: A1B 2C3 (Ensure a space is included)");
              postalInput.reportValidity();
              valid = false;
            } else {
              const allowedPrefixes = cityPostalMap[selectedCity];
              if (allowedPrefixes) {
                const matches = allowedPrefixes.some(p => postalVal.startsWith(p));
                if (!matches) {
                  postalInput.setCustomValidity("Please enter the correct postal code according to the selected city");
                  postalInput.reportValidity();
                  valid = false;
                }
              }
            }
          }
        }

        if (valid && currentStep < steps.length - 1) {
          currentStep++;
          updateForm();
        }
      });
    });

    prevBtns.forEach(btn => {
      btn.addEventListener("click", () => {
        if (currentStep > 0) {
          currentStep--;
          updateForm();
        }
      });
    });
</script>

  <div class="cargent-floating-contact">
    <a href="https://wa.me/14373359080" class="cargent-fab whatsapp whatsapp-fab" target="_blank">
      <i class="bi bi-whatsapp"></i>
    </a>
    <a href="tel:+14373359080" class="cargent-fab phone">
      <i class="bi bi-telephone-fill"></i>
    </a>
  </div>
</body>
</html>